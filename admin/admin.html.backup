<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin - Qu·∫£n l√Ω ƒë·∫•u gi√°</title>
  <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üîß</text></svg>">
  <link rel="stylesheet" href="admin.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-header">
      <i class="fas fa-gavel"></i>
      <h2>Admin Panel</h2>
    </div>
    <nav class="sidebar-nav">
      <a href="#dashboard" class="nav-item active" data-section="dashboard">
        <i class="fas fa-chart-line"></i>
        <span>Dashboard</span>
      </a>
      <a href="#products" class="nav-item" data-section="products">
        <i class="fas fa-box"></i>
        <span>S·∫£n ph·∫©m</span>
      </a>
      <a href="#add-product" class="nav-item" data-section="add-product">
        <i class="fas fa-plus-circle"></i>
        <span>Th√™m s·∫£n ph·∫©m</span>
      </a>
      <a href="#statistics" class="nav-item" data-section="statistics">
        <i class="fas fa-chart-bar"></i>
        <span>Th·ªëng k√™</span>
      </a>
      <a href="#settings" class="nav-item" data-section="settings">
        <i class="fas fa-cog"></i>
        <span>C√†i ƒë·∫∑t</span>
      </a>
    </nav>
    <div class="sidebar-footer">
      <a href="/" class="btn-back-home">
        <i class="fas fa-home"></i>
        <span>V·ªÅ trang ch·ªß</span>
      </a>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Header -->
    <header class="top-header">
      <div class="header-left">
        <button class="btn-toggle-sidebar">
          <i class="fas fa-bars"></i>
        </button>
        <h1 id="page-title">Dashboard</h1>
      </div>
      <div class="header-right">
        <div class="header-stats">
          <div class="stat-item">
            <i class="fas fa-box"></i>
            <span id="totalProducts">0</span>
            <small>S·∫£n ph·∫©m</small>
          </div>
          <div class="stat-item">
            <i class="fas fa-gavel"></i>
            <span id="totalBids">0</span>
            <small>L∆∞·ª£t ƒë·∫•u</small>
          </div>
        </div>
        <div class="user-menu">
          <img src="https://ui-avatars.com/api/?name=Admin&background=4CAF50&color=fff" alt="Admin">
          <span>Admin</span>
        </div>
      </div>
    </header>

    <!-- Dashboard Section -->
    <section id="dashboard-section" class="content-section active">
      <div class="dashboard-grid">
        <div class="stat-card">
          <div class="stat-icon blue">
            <i class="fas fa-box"></i>
          </div>
          <div class="stat-info">
            <h3 id="dashTotalProducts">0</h3>
            <p>T·ªïng s·∫£n ph·∫©m</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon green">
            <i class="fas fa-gavel"></i>
          </div>
          <div class="stat-info">
            <h3 id="dashTotalBids">0</h3>
            <p>T·ªïng l∆∞·ª£t ƒë·∫•u</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon orange">
            <i class="fas fa-dollar-sign"></i>
          </div>
          <div class="stat-info">
            <h3 id="dashTotalValue">0 VNƒê</h3>
            <p>T·ªïng gi√° tr·ªã</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon red">
            <i class="fas fa-fire"></i>
          </div>
          <div class="stat-info">
            <h3 id="dashHotProducts">0</h3>
            <p>S·∫£n ph·∫©m hot</p>
          </div>
        </div>
      </div>

      <div class="recent-activity">
        <h2><i class="fas fa-history"></i> Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y</h2>
        <div class="activity-list" id="recentActivity">
          <!-- Dynamic content -->
        </div>
      </div>
    </section>

    <!-- Products Section -->
    <section id="products-section" class="content-section">
      <div class="section-header">
        <h2><i class="fas fa-box"></i> Danh s√°ch s·∫£n ph·∫©m</h2>
        <div class="section-actions">
          <button class="btn btn-success" onclick="exportStats()">
            <i class="fas fa-file-excel"></i> Xu·∫•t Excel
          </button>
          <button class="btn btn-primary" onclick="refreshProducts()">
            <i class="fas fa-sync-alt"></i> L√†m m·ªõi
          </button>
        </div>
      </div>
      <div class="table-container">
        <table id="tbl" class="data-table">
          <thead>
            <tr>
              <th>M√£</th>
              <th>T√™n s·∫£n ph·∫©m</th>
              <th>Gi√° kh·ªüi ƒëi·ªÉm</th>
              <th>Gi√° hi·ªán t·∫°i</th>
              <th>Ng∆∞·ªùi ƒë·∫•u gi√°</th>
              <th>IP cu·ªëi</th>
              <th>H√¨nh ·∫£nh</th>
              <th>Thao t√°c</th>
            </tr>
          </thead>
          <tbody>
            <!-- Dynamic content -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- Add Product Section -->
    <section id="add-product-section" class="content-section">
      <div class="form-container">
        <h2><i class="fas fa-plus-circle"></i> Th√™m s·∫£n ph·∫©m m·ªõi</h2>
        <form id="formAdd" onsubmit="addProduct(event)" class="product-form">
          <div class="form-grid">
            <div class="form-group">
              <label><i class="fas fa-tag"></i> T√™n s·∫£n ph·∫©m</label>
              <input type="text" name="tenProduct" required placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m">
            </div>
            <div class="form-group">
              <label><i class="fas fa-dollar-sign"></i> Gi√° kh·ªüi ƒëi·ªÉm (VNƒê)</label>
              <input type="number" name="giaKhoiDiem" required placeholder="0">
            </div>
          </div>
          <div class="form-group">
            <label><i class="fas fa-align-left"></i> M√¥ t·∫£</label>
            <textarea name="moTa" rows="4" placeholder="Nh·∫≠p m√¥ t·∫£ s·∫£n ph·∫©m"></textarea>
          </div>
          <div class="form-group">
            <label><i class="fas fa-image"></i> H√¨nh ·∫£nh (t·ªëi ƒëa 4 ·∫£nh)</label>
            <div class="file-upload-wrapper">
              <input type="file" name="hinhAnh" multiple accept="image/*" id="fileInput">
              <label for="fileInput" class="file-upload-label">
                <i class="fas fa-cloud-upload-alt"></i>
                <span>Ch·ªçn ·∫£nh ho·∫∑c k√©o th·∫£ v√†o ƒë√¢y</span>
              </label>
              <div id="preview-container" class="preview-container"></div>
            </div>
          </div>
          <button type="submit" class="btn btn-primary btn-large">
            <i class="fas fa-plus"></i> Th√™m s·∫£n ph·∫©m
          </button>
        </form>
      </div>
    </section>

    <!-- Statistics Section -->
    <section id="statistics-section" class="content-section">
      <h2><i class="fas fa-chart-bar"></i> Th·ªëng k√™ chi ti·∫øt</h2>
      <div class="stats-grid">
        <div class="chart-card">
          <h3>Bi·ªÉu ƒë·ªì gi√° ƒë·∫•u</h3>
          <canvas id="priceChart"></canvas>
        </div>
        <div class="chart-card">
          <h3>Top s·∫£n ph·∫©m hot</h3>
          <div id="topProducts" class="top-products-list"></div>
        </div>
      </div>
    </section>

    <!-- Settings Section -->
    <section id="settings-section" class="content-section">
      <h2><i class="fas fa-cog"></i> C√†i ƒë·∫∑t h·ªá th·ªëng</h2>
      <div class="settings-container">
        <div class="setting-item">
          <div class="setting-info">
            <h3>Th·ªùi gian ƒë·∫•u gi√°</h3>
            <p>C·∫•u h√¨nh th·ªùi gian b·∫Øt ƒë·∫ßu v√† k·∫øt th√∫c ƒë·∫•u gi√°</p>
          </div>
          <button class="btn btn-secondary">C·∫•u h√¨nh</button>
        </div>
        <div class="setting-item">
          <div class="setting-info">
            <h3>B∆∞·ªõc gi√° t·ªëi thi·ªÉu</h3>
            <p>ƒê·∫∑t b∆∞·ªõc gi√° t·ªëi thi·ªÉu cho m·ªói l·∫ßn ƒë·∫•u</p>
          </div>
          <button class="btn btn-secondary">C·∫•u h√¨nh</button>
        </div>
        <div class="setting-item">
          <div class="setting-info">
            <h3>Email th√¥ng b√°o</h3>
            <p>C·∫•u h√¨nh email nh·∫≠n th√¥ng b√°o khi c√≥ ƒë·∫•u gi√° m·ªõi</p>
          </div>
          <button class="btn btn-secondary">C·∫•u h√¨nh</button>
        </div>
      </div>
    </section>
  </div>

  <!-- Edit Modal -->
  <div id="editModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2><i class="fas fa-edit"></i> Ch·ªânh s·ª≠a s·∫£n ph·∫©m</h2>
        <button class="modal-close" id="editClose">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <form id="formEdit" onsubmit="updateProduct(event)" class="product-form">
        <input type="hidden" id="editId">
        <div class="form-grid">
          <div class="form-group">
            <label><i class="fas fa-tag"></i> T√™n s·∫£n ph·∫©m</label>
            <input type="text" id="editTen" name="tenProduct" required>
          </div>
          <div class="form-group">
            <label><i class="fas fa-dollar-sign"></i> Gi√° kh·ªüi ƒëi·ªÉm</label>
            <input type="number" id="editGiaKhoiDiem" name="giaKhoiDiem" required>
          </div>
        </div>
        <div class="form-grid">
          <div class="form-group">
            <label><i class="fas fa-money-bill-wave"></i> Gi√° hi·ªán t·∫°i</label>
            <input type="number" id="editGiaHienTai" name="giaHienTai">
          </div>
          <div class="form-group">
            <label><i class="fas fa-user"></i> Ng∆∞·ªùi ƒë·∫•u gi√°</label>
            <input type="text" id="editNguoiDauGia" name="tenNguoiDauGia">
          </div>
        </div>
        <div class="form-group">
          <label><i class="fas fa-align-left"></i> M√¥ t·∫£</label>
          <textarea id="editMoTa" name="moTa" rows="4"></textarea>
        </div>
        <div class="form-group">
          <label><i class="fas fa-image"></i> H√¨nh ·∫£nh hi·ªán t·∫°i</label>
          <div id="editImgs" class="current-images"></div>
        </div>
        <div class="form-group">
          <label><i class="fas fa-upload"></i> Thay ƒë·ªïi h√¨nh ·∫£nh</label>
          <input type="file" name="hinhAnh" multiple accept="image/*">
        </div>
        <div class="modal-actions">
          <button type="submit" class="btn btn-primary">
            <i class="fas fa-save"></i> L∆∞u thay ƒë·ªïi
          </button>
          <button type="button" class="btn btn-secondary" onclick="closeEditModal()">
            <i class="fas fa-times"></i> H·ªßy
          </button>
        </div>
      </form>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="admin.js"></script>
</body>
</html>